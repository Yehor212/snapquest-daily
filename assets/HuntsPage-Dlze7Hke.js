import{j as e,m as d,F as T,U as H,G as S,i as P,r as j,H as z,J as E,B as F,M as u}from"./index-BcAad5NL.js";import{T as X,a as B,b as g,c as b}from"./tabs-DQuVQ-JW.js";import{S as v,a as N,b as y,c as k,d as o}from"./select-BawYPWZS.js";import{X as U}from"./XpBadge-BHMjOErE.js";import{D as V}from"./DifficultyBadge-BHXT3OMi.js";import{P as D}from"./ProgressRing-D8cCgeg3.js";import{U as m}from"./index-CIdSBVH7.js";import{C as I}from"./circle-check-DFRjxkEJ.js";import{E as w}from"./EmptyState-DdtiLvXy.js";import{A as R}from"./arrow-left-yUjUlFes.js";import"./index-DtYsoNNU.js";function C({hunt:t,progress:l,onClick:x}){const i=(l==null?void 0:l.tasksCompleted.length)||0,r=t.tasks.length,c=r>0?i/r*100:0,n=i===r&&r>0;return e.jsxs(d.div,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:x,className:"bg-card rounded-2xl border border-border overflow-hidden cursor-pointer group",children:[e.jsxs("div",{className:"relative h-32 overflow-hidden",children:[e.jsx("img",{src:t.coverImage,alt:t.title,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),e.jsxs("div",{className:"absolute top-3 left-3 flex gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded-full bg-black/50 backdrop-blur-sm text-xs font-medium",children:m.hunts.themes[t.theme]}),e.jsx(V,{difficulty:t.difficulty,size:"sm"})]}),n&&e.jsx("div",{className:"absolute top-3 right-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full bg-green-500/90 text-xs font-semibold text-white",children:[e.jsx(I,{className:"w-3 h-3"}),"Завершено"]})}),e.jsx("div",{className:"absolute bottom-3 right-3",children:e.jsx(U,{xp:t.totalXp,size:"sm"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-display text-lg font-bold mb-1 group-hover:text-primary transition-colors",children:t.title}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-4",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(T,{className:"w-4 h-4"}),m.hunts.duration[t.duration]]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(H,{className:"w-4 h-4"}),t.participantsCount]})]}),l?e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(D,{progress:c,size:32,strokeWidth:3,children:e.jsxs("span",{className:"text-[10px] font-medium",children:[i,"/",r]})})}):e.jsx(S,{className:"w-5 h-5 text-muted-foreground group-hover:text-primary group-hover:translate-x-1 transition-all"})]})]})]})}function Q(){const t=P(),[l,x]=j.useState("all"),[i,r]=j.useState("all"),c=z(),n=E.filter(s=>!(l!=="all"&&s.theme!==l||i!=="all"&&s.difficulty!==i)),p=n.filter(s=>{const a=c[s.id];return!a||a.tasksCompleted.length<s.tasks.length}),h=n.filter(s=>{const a=c[s.id];return a&&a.tasksCompleted.length===s.tasks.length}),f=s=>{t(`/hunts/${s}`)};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-lg border-b border-border",children:e.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsx(F,{variant:"ghost",size:"icon",onClick:()=>t(-1),children:e.jsx(R,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-display text-lg font-semibold",children:"Фото-охота"}),e.jsx("div",{className:"w-10"})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-secondary border border-border mb-4",children:[e.jsx(u,{className:"w-4 h-4 text-accent"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Исследуй мир"})]}),e.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Фото-охота"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-md mx-auto",children:"Выполняйте серии заданий, исследуйте новые места и зарабатывайте XP"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(v,{value:l,onValueChange:s=>x(s),children:[e.jsx(N,{className:"w-[140px]",children:e.jsx(y,{placeholder:"Тема"})}),e.jsxs(k,{children:[e.jsx(o,{value:"all",children:"Все темы"}),Object.entries(m.hunts.themes).map(([s,a])=>e.jsx(o,{value:s,children:a},s))]})]}),e.jsxs(v,{value:i,onValueChange:s=>r(s),children:[e.jsx(N,{className:"w-[140px]",children:e.jsx(y,{placeholder:"Сложность"})}),e.jsxs(k,{children:[e.jsx(o,{value:"all",children:"Любая"}),Object.entries(m.hunts.difficulty).map(([s,a])=>e.jsx(o,{value:s,children:a},s))]})]})]}),e.jsxs(X,{defaultValue:"active",className:"w-full",children:[e.jsxs(B,{className:"grid w-full grid-cols-2",children:[e.jsxs(g,{value:"active",children:["Активные (",p.length,")"]}),e.jsxs(g,{value:"completed",children:["Завершённые (",h.length,")"]})]}),e.jsx(b,{value:"active",className:"mt-4 space-y-4",children:p.length>0?p.map((s,a)=>e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},children:e.jsx(C,{hunt:s,progress:c[s.id],onClick:()=>f(s.id)})},s.id)):e.jsx(w,{icon:u,title:"Нет активных охот",description:"Выберите другие фильтры или посмотрите завершённые охоты"})}),e.jsx(b,{value:"completed",className:"mt-4 space-y-4",children:h.length>0?h.map((s,a)=>e.jsx(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:a*.1},children:e.jsx(C,{hunt:s,progress:c[s.id],onClick:()=>f(s.id)})},s.id)):e.jsx(w,{icon:u,title:"Нет завершённых охот",description:"Начните первую охоту и завершите все задания"})})]})]})]})}export{Q as default};
