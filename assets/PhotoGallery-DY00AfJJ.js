import{c as h,ae as j,j as e,m as n,B as N,X as v,af as o,ag as m,ah as x,F as y,a6 as u,r as b,a as w}from"./index-DFnNWw_v.js";import{A as p}from"./index-DHdUGGn6.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=h("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);function P({photo:s,onClose:i}){var c;if(!s)return null;const t=j.find(l=>l.id===s.userId),r=new Date(s.createdAt).toLocaleDateString("ru-RU",{day:"numeric",month:"long",hour:"2-digit",minute:"2-digit"});return e.jsx(p,{children:s&&e.jsx(n.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm p-4",onClick:i,children:e.jsxs(n.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"relative w-full max-w-lg bg-card rounded-2xl overflow-hidden",onClick:l=>l.stopPropagation(),children:[e.jsx(N,{size:"icon",variant:"ghost",className:"absolute top-3 right-3 z-10 w-10 h-10 rounded-full bg-black/50 hover:bg-black/70",onClick:i,children:e.jsx(v,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative aspect-square",children:[e.jsx("img",{src:s.imageData,alt:"",className:"w-full h-full object-cover"}),s.isTop&&e.jsx("div",{className:"absolute top-3 left-3",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 rounded-full bg-gold/90 text-sm font-semibold text-black",children:[e.jsx(o,{className:"w-4 h-4"}),"TOP"]})})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[t&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:t.avatar,alt:t.displayName,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:t.displayName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",t.username]})]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("button",{className:"flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{children:s.likes})]}),e.jsxs("button",{className:"flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",children:[e.jsx(x,{className:"w-5 h-5"}),e.jsx("span",{children:s.comments})]}),e.jsx("button",{className:"flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors",children:e.jsx(y,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(u,{className:"w-4 h-4"}),r]}),((c=s.metadata)==null?void 0:c.location)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(k,{className:"w-4 h-4"}),s.metadata.location.placeName||"Местоположение"]})]})]})]})})})}function z({photos:s,columns:i=3,onPhotoClick:t,showStats:r=!0,emptyMessage:c="Пока нет фотографий"}){const[l,d]=b.useState(null),f=a=>{t?t(a):d(a)};return s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-secondary flex items-center justify-center mb-4",children:e.jsx(u,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("p",{className:"text-muted-foreground",children:c})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:w("grid gap-2",i===2?"grid-cols-2":"grid-cols-3"),children:e.jsx(p,{children:s.map((a,g)=>e.jsxs(n.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{delay:g*.05},className:"relative aspect-square rounded-lg overflow-hidden bg-secondary cursor-pointer group",onClick:()=>f(a),children:[e.jsx("img",{src:a.imageData,alt:"",className:"w-full h-full object-cover transition-transform group-hover:scale-105",loading:"lazy"}),a.isTop&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gold/90 text-xs font-semibold text-black",children:[e.jsx(o,{className:"w-3 h-3"}),"TOP"]})}),r&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsxs("div",{className:"absolute bottom-2 left-2 right-2 flex items-center gap-3 text-white text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(m,{className:"w-3 h-3"}),a.likes]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(x,{className:"w-3 h-3"}),a.comments]})]})})]},a.id))})}),e.jsx(P,{photo:l,onClose:()=>d(null)})]})}export{z as P};
