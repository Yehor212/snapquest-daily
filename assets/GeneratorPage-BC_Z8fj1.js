import{c as j,j as e,m,B as u,F as W,C as q,r as d,W as J,S as V,G as C,H as K,n as O,p as _,J as Q,T as Y,i as Z,k as S,l as T,K as ee,M as te,N as ae}from"./index-BQQ8k2S_.js";import{X as se}from"./XpBadge-S2QO3EtP.js";import{D as ie}from"./DifficultyBadge-DxlFUbHO.js";import{U as g}from"./index-CIdSBVH7.js";import{S as M,a as z,b as I,c as A,d as f}from"./select-oCaRBPov.js";import{E as B}from"./EmptyState-BY8k-Inp.js";import{A as re}from"./arrow-left-Z5wnwJql.js";import{A as le}from"./index-DNKPPDmp.js";import{L as G}from"./lightbulb-HoBmT_7e.js";import"./index-LBKbdDCE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=j("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=j("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=j("Shuffle",[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]]);function H({challenge:a,onUse:i,onSave:r,onShare:l,onRegenerate:s,isSaved:n}){return e.jsxs(m.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:300,damping:30},className:"bg-card rounded-2xl border border-border overflow-hidden",children:[e.jsx("div",{className:"h-2 bg-gradient-to-r from-primary via-accent to-gold"}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:g.categories[a.category]}),e.jsx(ie,{difficulty:a.difficulty,size:"sm"})]}),e.jsx("h3",{className:"font-display text-xl font-bold leading-tight",children:a.title}),e.jsx(se,{xp:a.xpReward,animated:!0}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[s&&e.jsxs(u,{variant:"outline",size:"sm",onClick:s,className:"gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"Другой"]}),r&&e.jsx(u,{variant:"outline",size:"sm",onClick:r,className:n?"text-gold":"",children:e.jsx(ne,{className:`w-4 h-4 ${n?"fill-current":""}`})}),l&&e.jsx(u,{variant:"outline",size:"sm",onClick:l,children:e.jsx(W,{className:"w-4 h-4"})}),i&&e.jsxs(u,{size:"sm",onClick:i,className:"flex-1 gap-2 bg-gradient-to-r from-primary to-primary/80",children:[e.jsx(q,{className:"w-4 h-4"}),"Выполнить"]})]})]})]})}function ce({onClick:a,isLoading:i=!1,variant:r="default"}){const[l,s]=d.useState(!1),n=()=>{s(!0),a(),setTimeout(()=>s(!1),600)};return r==="large"?e.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,disabled:i,className:"relative w-full py-6 rounded-2xl bg-gradient-to-r from-primary via-accent to-gold text-primary-foreground font-display text-xl font-bold overflow-hidden group",children:[e.jsx(m.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent",initial:{x:"-100%"},animate:l?{x:"100%"}:{x:"-100%"},transition:{duration:.6}}),e.jsxs("span",{className:"relative flex items-center justify-center gap-3",children:[e.jsx(m.div,{animate:l?{rotate:360}:{rotate:0},transition:{duration:.6},children:e.jsx(J,{className:"w-6 h-6"})}),i?"Генерирую...":"Сгенерировать челлендж"]})]}):e.jsxs(u,{onClick:n,disabled:i,className:"gap-2 bg-gradient-to-r from-primary to-accent",children:[e.jsx(m.div,{animate:l?{rotate:360}:{rotate:0},transition:{duration:.6},children:e.jsx(V,{className:"w-4 h-4"})}),i?"Генерирую...":"Сгенерировать"]})}const de=["all","creative","nature","urban","portrait","abstract","food","colors","emotions","architecture"],me=["all","easy","medium","hard"];function ue({category:a,difficulty:i,onCategoryChange:r,onDifficultyChange:l}){return e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(C,{htmlFor:"category",className:"text-sm text-muted-foreground",children:"Категория"}),e.jsxs(M,{value:a,onValueChange:r,children:[e.jsx(z,{id:"category",children:e.jsx(I,{placeholder:"Выберите категорию"})}),e.jsxs(A,{children:[e.jsx(f,{value:"all",children:"Все категории"}),de.slice(1).map(s=>e.jsx(f,{value:s,children:g.categories[s]},s))]})]})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(C,{htmlFor:"difficulty",className:"text-sm text-muted-foreground",children:"Сложность"}),e.jsxs(M,{value:i,onValueChange:l,children:[e.jsx(z,{id:"difficulty",children:e.jsx(I,{placeholder:"Выберите сложность"})}),e.jsxs(A,{children:[e.jsx(f,{value:"all",children:"Любая"}),me.slice(1).map(s=>e.jsx(f,{value:s,children:g.hunts.difficulty[s]},s))]})]})]})]})}function xe(a){return a[Math.floor(Math.random()*a.length)]}function he(a){switch(a){case"easy":return 30+Math.floor(Math.random()*20);case"medium":return 50+Math.floor(Math.random()*30);case"hard":return 80+Math.floor(Math.random()*40);default:return 40}}function fe(a,i){let r=a.pattern;const l={};return a.variables.forEach(s=>{const n=xe(s.options);l[s.name]=n,r=r.replace(`[${s.name}]`,n)}),{id:K(),templateId:a.id,title:r,description:r,variables:l,category:a.category,difficulty:a.difficulty,xpReward:he(a.difficulty),generatedAt:new Date().toISOString()}}function pe(a,i){return a.filter(r=>!(i.category&&r.category!==i.category||i.difficulty&&r.difficulty!==i.difficulty))}const ye=[{id:"tmpl-extra-1",pattern:"Сфотографируйте [object] так, чтобы было видно [detail]",category:"creative",difficulty:"medium",variables:[{name:"object",type:"object",options:["ваш обед","чашку кофе","любимую книгу","рабочий стол","окно"]},{name:"detail",type:"style",options:["отражение","тень","текстуру","игру света","глубину"]}]},{id:"tmpl-extra-2",pattern:"Найдите [count] предметов [color] цвета и сфотографируйте их вместе",category:"colors",difficulty:"easy",variables:[{name:"count",type:"object",options:["3","5","7"]},{name:"color",type:"color",options:["красного","синего","зелёного","жёлтого","белого"]}]},{id:"tmpl-extra-3",pattern:"Создайте фото в стиле [style] используя только [limitation]",category:"abstract",difficulty:"hard",variables:[{name:"style",type:"style",options:["минимализм","симметрия","хаос","геометрия"]},{name:"limitation",type:"object",options:["естественный свет","один цвет","прямые линии","круглые формы"]}]},{id:"tmpl-extra-4",pattern:"Запечатлейте момент [moment] в вашем дне",category:"emotions",difficulty:"easy",variables:[{name:"moment",type:"emotion",options:["спокойствия","радости","ожидания","движения","тишины"]}]},{id:"tmpl-extra-5",pattern:"Сфотографируйте [subject] с [perspective] перспективы",category:"architecture",difficulty:"medium",variables:[{name:"subject",type:"location",options:["здание","лестницу","коридор","арку","мост"]},{name:"perspective",type:"angle",options:["низкой","высокой","диагональной","центральной"]}]}],R=[...ee,...ye];function Me(){const a=O(),{toast:i}=_(),[r,l]=d.useState("all"),[s,n]=d.useState("all"),[o,D]=d.useState(null),[h,v]=d.useState(Q),[b,L]=d.useState([]),[X,N]=d.useState(!1),w=d.useCallback(()=>{N(!0),setTimeout(()=>{const t={};r!=="all"&&(t.category=r),s!=="all"&&(t.difficulty=s);const x=pe(R,t),c=x.length>0?x:R,y=c[Math.floor(Math.random()*c.length)],P=fe(y);o&&L($=>[o,...$].slice(0,10)),D(P),N(!1)},400)},[r,s,o]),k=t=>{h.some(c=>c.id===t.id)?(te(t.id),v(c=>c.filter(y=>y.id!==t.id)),i({title:"Удалено из сохранённых"})):(ae(t),v(c=>[{...t,isSaved:!0},...c]),i({title:"Сохранено!"}))},p=t=>{a(`/upload?challenge=${t.id}`)},F=async t=>{try{await navigator.share({title:"Фото-челлендж",text:t.title,url:window.location.href})}catch{await navigator.clipboard.writeText(t.title),i({title:"Скопировано в буфер обмена"})}},U=t=>h.some(x=>x.id===t);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-lg border-b border-border",children:e.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsx(u,{variant:"ghost",size:"icon",onClick:()=>a(-1),children:e.jsx(re,{className:"w-5 h-5"})}),e.jsx("h1",{className:"font-display text-lg font-semibold",children:"Генератор"}),e.jsx("div",{className:"w-10"})]})}),e.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-6",children:[e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-secondary border border-border mb-4",children:[e.jsx(V,{className:"w-4 h-4 text-gold"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Бесконечные идеи"})]}),e.jsx("h2",{className:"font-display text-2xl font-bold mb-2",children:"Генератор челленджей"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-md mx-auto",children:"Не знаете, что сфотографировать? Нажмите кнопку и получите уникальное творческое задание!"})]}),e.jsx(ue,{category:r,difficulty:s,onCategoryChange:l,onDifficultyChange:n}),e.jsx(ce,{onClick:w,isLoading:X,variant:"large"}),e.jsx(le,{mode:"wait",children:o&&e.jsx(H,{challenge:o,onUse:()=>p(o),onSave:()=>k(o),onShare:()=>F(o),onRegenerate:w,isSaved:U(o.id)},o.id)}),e.jsxs(Y,{defaultValue:"history",className:"w-full",children:[e.jsxs(Z,{className:"grid w-full grid-cols-2",children:[e.jsxs(S,{value:"history",className:"gap-2",children:[e.jsx(E,{className:"w-4 h-4"}),"История"]}),e.jsxs(S,{value:"saved",className:"gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Сохранённые"]})]}),e.jsx(T,{value:"history",className:"mt-4 space-y-4",children:b.length>0?b.map(t=>e.jsx(m.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-card rounded-xl border border-border p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium mb-1",children:t.title}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["+",t.xpReward," XP"]})]}),e.jsx(u,{variant:"outline",size:"sm",onClick:()=>p(t),children:"Выполнить"})]})},t.id)):e.jsx(B,{icon:E,title:"История пуста",description:"Сгенерированные челленджи появятся здесь"})}),e.jsx(T,{value:"saved",className:"mt-4 space-y-4",children:h.length>0?h.map(t=>e.jsx(H,{challenge:t,onUse:()=>p(t),onSave:()=>k(t),isSaved:!0},t.id)):e.jsx(B,{icon:G,title:"Нет сохранённых",description:"Сохраняйте понравившиеся челленджи, чтобы вернуться к ним позже"})})]})]})]})}export{Me as default};
