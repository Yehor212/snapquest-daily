import{c as w,j as s,D as T,p as A,B as d,q as D,t as O,i as C,r as c,v as B,w as g,m as j,I as y}from"./index-BcAad5NL.js";import{T as L,a as E,b as f,c as v}from"./tabs-DQuVQ-JW.js";import{P as b}from"./PhotoGallery-CaZhDWEV.js";import{E as N}from"./EmptyState-DdtiLvXy.js";import{A as I}from"./arrow-left-yUjUlFes.js";import{P as M}from"./plus-BKLV50ZI.js";import"./index-C9vU97Ne.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=w("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=w("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);function q({filter:a,onFilterChange:n}){var r;const l=[{value:"date",label:"По дате"},{value:"likes",label:"По лайкам"}],i=t=>{a.sortBy===t?n({sortOrder:a.sortOrder==="desc"?"asc":"desc"}):n({sortBy:t,sortOrder:"desc"})},m=()=>{n({isTop:a.isTop?void 0:!0})};return s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(T,{children:[s.jsx(A,{asChild:!0,children:s.jsxs(d,{variant:"outline",size:"sm",className:"gap-2",children:[s.jsx(z,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:(r=l.find(t=>t.value===a.sortBy))==null?void 0:r.label})]})}),s.jsx(D,{align:"end",children:l.map(t=>s.jsxs(O,{onClick:()=>i(t.value),children:[t.label,a.sortBy===t.value&&s.jsx("span",{className:"ml-2 text-muted-foreground",children:a.sortOrder==="desc"?"↓":"↑"})]},t.value))})]}),s.jsxs(d,{variant:a.isTop?"default":"outline",size:"sm",className:"gap-2",onClick:m,children:[s.jsx(S,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Только TOP"})]})]})}function J(){const a=C(),[n,l]=c.useState([]),[i,m]=c.useState(!0),[r,t]=c.useState({sortBy:"date",sortOrder:"desc"});c.useEffect(()=>{k()},[]);const k=async()=>{try{const o=[...await B(),...g];l(o)}catch(e){console.error("Error loading photos:",e),l(g)}finally{m(!1)}},P=e=>{t(o=>({...o,...e}))},h=n.filter(e=>!(r.isTop&&!e.isTop)).sort((e,o)=>{const x=r.sortOrder==="desc"?-1:1;return r.sortBy==="date"?x*(new Date(o.createdAt).getTime()-new Date(e.createdAt).getTime()):r.sortBy==="likes"?x*(o.likes-e.likes):0}),u=h.filter(e=>e.userId==="user-1"),p=h;return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("header",{className:"sticky top-0 z-40 bg-background/80 backdrop-blur-lg border-b border-border",children:s.jsxs("div",{className:"container mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsx(d,{variant:"ghost",size:"icon",onClick:()=>a(-1),children:s.jsx(I,{className:"w-5 h-5"})}),s.jsx("h1",{className:"font-display text-lg font-semibold",children:"Галерея"}),s.jsx(d,{variant:"ghost",size:"icon",onClick:()=>a("/upload"),children:s.jsx(M,{className:"w-5 h-5"})})]})}),s.jsx("main",{className:"container mx-auto px-4 py-6",children:s.jsxs(L,{defaultValue:"all",className:"w-full",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs(E,{children:[s.jsx(f,{value:"all",children:"Все"}),s.jsx(f,{value:"my",children:"Мои фото"})]}),s.jsx(q,{filter:r,onFilterChange:P})]}),s.jsx(v,{value:"all",children:i?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:9}).map((e,o)=>s.jsx("div",{className:"aspect-square rounded-lg bg-secondary animate-pulse"},o))}):p.length>0?s.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},children:s.jsx(b,{photos:p,columns:3})}):s.jsx(N,{icon:y,title:"Пока нет фото",description:"Станьте первым, кто загрузит фото!",actionLabel:"Загрузить фото",onAction:()=>a("/upload")})}),s.jsx(v,{value:"my",children:i?s.jsx("div",{className:"grid grid-cols-3 gap-2",children:Array.from({length:6}).map((e,o)=>s.jsx("div",{className:"aspect-square rounded-lg bg-secondary animate-pulse"},o))}):u.length>0?s.jsx(j.div,{initial:{opacity:0},animate:{opacity:1},children:s.jsx(b,{photos:u,columns:3})}):s.jsx(N,{icon:y,title:"У вас пока нет фото",description:"Выполняйте челленджи и ваши фото появятся здесь",actionLabel:"Загрузить первое фото",onAction:()=>a("/upload")})})]})})]})}export{J as default};
